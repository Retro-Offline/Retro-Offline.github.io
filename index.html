<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tellraw Command Generator</title>
<style>
  textarea { width: 100%; height: 150px; }
</style>
</head>
<body>

<h2>Tellraw Command Generator</h2>

<label for="modeSelect">Mode:</label>
<select id="modeSelect">
  <option value="tellraw" selected>tellraw</option>
  <option value="other">Other (pretty JSON)</option>
</select>

<br/><br/>

<button id="generateBtn">Generate Output</button>

<br/><br/>

<textarea id="output" readonly></textarea>

<script>
function rgbToHex(r, g, b) {
  return "#" + [r, g, b].map(x => {
    const hex = x.toString(16);
    return hex.length === 1 ? "0" + hex : hex;
  }).join("");
}

function generateOutput(mode, data, rows, cols) {
  if (mode === "tellraw") {
    const extra = [];
    for (let y = 0; y < rows; y++) {
      if (y > 0) extra.push({ text: "\n" });
      for (let x = 0; x < cols; x++) {
        const i = (y * cols + x) * 4;
        const r = data[i], g = data[i + 1], b = data[i + 2];
        const color = rgbToHex(r, g, b);
        extra.push({ text: "█", color });
      }
    }
    const command = {
      text: "",
      extra: extra
    };
    // NO pretty-printing here — one line output only
    return `/tellraw @p ${JSON.stringify(command)}`;
  } else {
    // For other modes, output pretty JSON for clarity
    return JSON.stringify(data, null, 2);
  }
}

// Example pixel data: 2 rows x 3 cols, RGBA values for each pixel
const exampleData = [
  255, 0, 0, 255,    // Red
  0, 255, 0, 255,    // Green
  0, 0, 255, 255,    // Blue
  255, 255, 0, 255,  // Yellow
  0, 255, 255, 255,  // Cyan
  255, 0, 255, 255   // Magenta
];

document.getElementById("generateBtn").addEventListener("click", () => {
  const mode = document.getElementById("modeSelect").value;
  const rows = 2;
  const cols = 3;
  const output = generateOutput(mode, exampleData, rows, cols);
  document.getElementById("output").value = output;
});
</script>

</body>
</html>
